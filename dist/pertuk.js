class v{constructor(){this.init()}init(){this.initThemeToggle(),this.initSyntaxHighlighting(),this.initSearch(),this.initTableOfContents(),this.initKeyboardShortcuts(),this.initGlobalLanguageSelector()}initThemeToggle(){const t=document.getElementById("theme-toggle");if(!t)return;const e=localStorage.getItem("theme")||"light";this.applyTheme(e),t.addEventListener("click",()=>{const s=(localStorage.getItem("theme")||"light")==="dark"?"light":"dark";this.applyTheme(s),localStorage.setItem("theme",s)})}applyTheme(t){const e=document.documentElement;t==="dark"?e.classList.add("dark"):e.classList.remove("dark"),e.offsetHeight}initSyntaxHighlighting(){this.addCopyButtons()}addCopyButtons(){document.querySelectorAll("pre").forEach(t=>{const e=document.createElement("button");e.className="absolute top-2 right-2 p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors rounded-md hover:bg-gray-100 dark:hover:bg-gray-800",e.innerHTML=`
                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                </svg>
            `,e.title="Copy code",t.style.position="relative",t.appendChild(e),e.addEventListener("click",()=>{const o=t.querySelector("code");o&&(async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(o.textContent);else{const r=document.createElement("textarea");r.value=o.textContent,r.style.position="fixed",r.style.left="-999999px",r.style.top="-999999px",document.body.appendChild(r),r.focus(),r.select(),document.execCommand("copy"),r.remove()}e.innerHTML=`
                                <svg class="h-4 w-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                </svg>
                            `,setTimeout(()=>{e.innerHTML=`
                                    <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                                    </svg>
                                `},2e3)}catch(r){console.warn("Failed to copy text: ",r)}})()})})}initSearch(){const t=document.getElementById("docs-search-input"),e=document.getElementById("docs-search-results");if(!t||!e)return;let o=null,s=null;const r=async()=>{if(o)return o;try{o=await(await fetch("/docs/index.json",{headers:{Accept:"application/json"}})).json()}catch(n){console.warn("Failed to load search index:",n),o=[]}return o},i=n=>{const a=document.createElement("div");return a.textContent=n,a.innerHTML},d=n=>{if(!n.length){e.classList.add("hidden"),e.innerHTML="";return}e.innerHTML=n.slice(0,8).map(a=>`
                <a class="block rounded-md px-3 py-2 text-sm transition-colors hover:bg-gray-100 dark:hover:bg-gray-800" href="/docs/${a.slug}">
                    <div class="font-medium text-gray-900 dark:text-white">${i(a.title)}</div>
                    <div class="mt-1 text-xs text-gray-600 dark:text-gray-400">${i(a.excerpt)}</div>
                </a>
            `).join(""),e.classList.remove("hidden")},l=n=>{if(!n.trim()){d([]);return}r().then(a=>{const c=n.toLowerCase(),h=a.filter(u=>u.title.toLowerCase().includes(c)||(u.headings||[]).some(g=>(g||"").toLowerCase().includes(c))||(u.excerpt||"").toLowerCase().includes(c)).sort((u,g)=>{const m=u.title.toLowerCase().includes(c),p=g.title.toLowerCase().includes(c);return m&&!p?-1:!m&&p?1:0});d(h)})};t.addEventListener("input",n=>{clearTimeout(s),s=setTimeout(()=>l(n.target.value),150)}),t.addEventListener("focus",n=>l(n.target.value)),document.addEventListener("click",n=>{!t.contains(n.target)&&!e.contains(n.target)&&e.classList.add("hidden")})}initTableOfContents(){const t=document.querySelectorAll("[data-toc-link]");if(!t.length)return;const e=Array.from(document.querySelectorAll("h2[id], h3[id]"));if(!e.length)return;let o=!1,s;const r=()=>{if(o)return;const i=window.scrollY,d=window.innerHeight,l=document.documentElement.scrollHeight;let n=null;if(i+d>=l-10)n=e[e.length-1];else for(let a=e.length-1;a>=0;a--){const c=e[a];if(c.getBoundingClientRect().top<=100){n=c;break}}t.forEach(a=>{n&&a.getAttribute("data-toc-link")===n.id?(a.classList.remove("text-gray-600","dark:text-gray-400"),a.classList.add("bg-orange-50","text-orange-700","dark:bg-orange-900/20","dark:text-orange-400")):(a.classList.remove("bg-orange-50","text-orange-700","dark:bg-orange-900/20","dark:text-orange-400"),a.classList.add("text-gray-600","dark:text-gray-400"))})};t.forEach(i=>{i.addEventListener("click",function(d){d.preventDefault();const l=this.getAttribute("data-toc-link"),n=document.getElementById(l);n&&(o=!0,n.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,null,`#${l}`),setTimeout(()=>{o=!1,r()},1e3))})}),window.addEventListener("scroll",function(){clearTimeout(s),s=setTimeout(r,50)},{passive:!0}),r()}initKeyboardShortcuts(){document.addEventListener("keydown",t=>{if((t.metaKey||t.ctrlKey)&&t.key==="k"){t.preventDefault();const e=document.getElementById("docs-search-input");e&&e.focus()}if(t.key==="Escape"){const e=document.getElementById("docs-search-results"),o=document.getElementById("docs-search-input");e&&e.classList.add("hidden"),o&&o.blur()}})}initGlobalLanguageSelector(){const t=document.getElementById("global-lang-select");t&&(this.setCurrentLocaleInSelector(t),t.addEventListener("change",async e=>{const o=e.target.value;try{let s=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content");if(!s){const r=document.cookie.split(";").find(i=>i.trim().startsWith("XSRF-TOKEN="));if(r){s=decodeURIComponent(r.split("=")[1]);try{s=JSON.parse(atob(s)).value}catch(i){console.warn("Could not parse XSRF token:",i)}}}window.location.href=`/locale/${o}?redirect=${encodeURIComponent(window.location.pathname)}`}catch(s){console.error("Error setting locale:",s),e.target.value=document.documentElement.lang.replace("-","_")}}))}setCurrentLocaleInSelector(t){const o=(document.documentElement.lang||"en").split("-")[0];t.querySelector(`option[value="${o}"]`)&&(t.value=o)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>new v):new v;
